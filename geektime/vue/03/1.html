<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Object.defineProperty å“åº”å¼ç¤ºä¾‹</title>
</head>
<body>
  <div id="app">Loading...</div>

  <script>
    const data = {};
    const el = document.getElementById('app');

    // ä½¿ç”¨ Object.defineProperty æ‹¦æˆª data.message çš„è¯»å†™
    // å±æ€§æ‹¦æˆª
    Object.defineProperty(data, 'message', {
      enumerable: true,
      configurable: true,

      get() {
        console.log('è¯»å– message');
        return this._message;
      },

      set(newVal) {
        console.log('è®¾ç½® message ä¸º:', newVal);
        this._message = newVal;
        // ğŸ‘‡ å…³é”®ï¼šæ•°æ®å˜åŒ–æ—¶ï¼Œæ‰‹åŠ¨æ›´æ–° DOM
        el.textContent = newVal; // vue å¸®æˆ‘ä»¬åšçš„
      }
    });

    // åˆå§‹åŒ–å€¼ï¼ˆä¼šè§¦å‘ setterï¼‰
    data.message = 'Hello, Vue 2!';

    // 3 ç§’åæ”¹å˜æ•°æ®ï¼Œé¡µé¢è‡ªåŠ¨æ›´æ–°
    setTimeout(() => {
      data.message = 'æ•°æ®å˜äº†ï¼é¡µé¢å·²æ›´æ–° ğŸ‰';
    }, 3000);
  </script>
</body>
</html>