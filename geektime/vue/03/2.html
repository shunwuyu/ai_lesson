<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Proxy å“åº”å¼ç¤ºä¾‹</title>
</head>
<body>
  <div id="app">Loading...</div>

  <script>
    const el = document.getElementById('app');

    const data = {
      message: 'Hello, Vue 3 (Proxy)!'
    };

    // ä½¿ç”¨ Proxy åˆ›å»ºå“åº”å¼å¯¹è±¡
    // ä»£ç†
    const state = new Proxy(data, {
      get(target, key, receiver) {
        console.log('è¯»å–', key);
        return Reflect.get(target, key, receiver);
      },
      set(target, key, value, receiver) {
        console.log(`è®¾ç½® ${key} ä¸º:`, value);
        const result = Reflect.set(target, key, value, receiver);

        // ğŸ‘‡ æ•°æ®å˜åŒ–æ—¶æ›´æ–° DOM ï¼ˆVue3 å†…éƒ¨å¸®æˆ‘ä»¬åšï¼‰
        if (key === 'message') {
          el.textContent = value;
        }

        return result;
      }
    });

    // åˆå§‹åŒ–æ¸²æŸ“
    el.textContent = state.message;

    // 3 ç§’åæ›´æ–°æ•°æ®
    setTimeout(() => {
      state.message = 'æ•°æ®å˜äº†ï¼Proxy è®©é¡µé¢è‡ªåŠ¨æ›´æ–° ğŸ‰';
    }, 3000);
  </script>
</body>
</html>
