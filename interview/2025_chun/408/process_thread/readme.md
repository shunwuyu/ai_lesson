- Chrome架构 打开了1个页面，为什么有4个进程？

![](https://static001.geekbang.org/resource/image/ce/9e/ce7f8cfe212bec0f53360422e3b03a9e.png?wh=1142*685)

- JS 是单线程
- 浏览器是多进程
    在现代浏览器中，如Google Chrome，采用了多进程架构来提高性能和安全性。这种架构将不同的任务分配给不同的进程，每个进程负责特定的功能模块。以下是基于图中的信息，从浏览器多进程的角度讲解主进程、进程间的通信以及它们如何配合网页加载和渲染的流程：
    - 主进程（Browser Process）
    主进程是浏览器的核心进程，负责管理整个浏览器的生命周期，包括启动、关闭、窗口管理等。
    它还负责协调其他进程之间的通信，确保各个进程能够协同工作。
    - GPU 进程（GPU Process）
    GPU 进程专门负责图形处理任务，如绘制页面、处理视频和图像等。
    通过将这些任务交给GPU进程，可以释放主进程和其他进程的CPU资源，从而提高整体性能。
    - 标签页进程（Tab Process）
    每个标签页都有一个独立的进程，负责渲染该标签页的内容。
    这种设计使得一个标签页崩溃不会影响其他标签页，提高了浏览器的稳定性。
    一个崩了 不会影响别的
    - 网络服务进程（Network Service Process）：
    网络服务进程负责处理所有与网络相关的任务，如HTTP请求、数据传输等。
    将这些任务集中在一个进程中可以减少网络请求的开销，提高效率。

## 进程间的通信
    IPC, Inter-Process Communication

    进程间通信（IPC, Inter-Process Communication）是多进程架构的关键。
    - 消息传递：进程之间通过发送消息进行通信。例如，当用户点击一个链接时，标签页进程会向网络服务进程发送一个请求消息，要求下载新的网页内容。
    - 共享内存：某些情况下，进程之间需要共享数据。例如，GPU进程可能需要访问标签页进程生成的像素数据来进行渲染。这时，可以通过共享内存的方式实现数据交换。

## 丛多进程的角度理解网页加载和渲染流程

- 用户在地址栏输入URL或点击链接。
- 标签页进程向网络服务进程发送请求，要求下载指定的网页内容。
- 网络服务进程通过网络获取网页内容，并将其返回给标签页进程。
- 标签页进程接收到内容后，开始解析HTML、CSS和JavaScript代码，并生成DOM树和样式树。
- 根据DOM树和样式树，标签页进程计算出每个元素的位置和大小。
- 标签页进程将布局信息发送给GPU进程，由GPU进程负责实际的绘制操作。
- 最终，绘制完成的页面被显示在用户的屏幕上。