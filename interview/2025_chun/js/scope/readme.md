# 在 JavaScript 中，作用域和作用域链是如何工作的?

## 作用域
一套规则，用于确定在何处查找变量，控制着变量的可见性和生命周期，确保变量在正确范围内可访问


## 作用域类别

- 全局作用域：在代码最外层定义的变量
- 函数作用域：函数内部定义的变量
- 块级作用域：ES6 引入的 let/const 创建的作用域



## 作用域链
    作用域链是用于在函数执行上下文内按顺序查找变量的一系列对象的集合。它从当前执行环境开始，逐层向外层作用域查找，直到全局作用域为止，确保每个变量访问都遵循预定的作用域规则。简称 变量的查找路径。

## 函数执行上下文

函数执行上下文是函数调用时创建的内部对象，包含变量对象、作用域链和this值，确保函数正确执行及其对变量的访问。

## 词法作用域
在编写代码时就已确定，并在运行时遵循的变量可访问性规则。它基于函数声明的位置来决定哪些变量可以访问，而不是函数调用的方式或位置。这意味着内部函数可以访问其外部函数的变量，但外部无法访问内部函数的局部变量。


## 函数内部的代码为什么不能在编译阶段执行? 面试官为什么要这么问， 是想考察我对什么的底层理解？

    本质是在考你对 JavaScript 执行机制的底层理解

    - JavaScript 的执行阶段划分
JavaScript 分为两个阶段：

编译阶段：词法分析、语法解析、作用域确定、变量提升（创建执行上下文、函数声明等）

执行阶段：代码真正运行、函数调用、赋值、逻辑执行等

👉 函数内部代码是在函数被调用时才会执行，因此不会在编译阶段执行。
    - 函数是“懒执行”的
        函数体内的代码只有在调用时才会进入执行上下文。这种懒执行特性，是 JS 为了性能和控制流设计的关键。
    - 执行上下文的时机与闭包
        函数内部的作用域、自由变量、闭包，都是在函数执行阶段才被解析绑定。提前执行会破坏这些机制。





