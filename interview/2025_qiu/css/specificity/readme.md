# css 优先级

- CSS 中用于决定当多个样式规则应用于同一个元素时（层叠样式），哪一个规则最终生效的机制。

- 它不是简单的“优先级”，而是一套基于选择器类型的权重计算系统。

CSS 权重比较规则可类比成四位数 a,b,c,d（优先级从高到低）：

a → 行内样式（不包含 !important）

b → ID 选择器个数

c → 类、属性选择器、伪类个数

d → 标签选择器、伪元素个数 

!important 会跳过权重计算，直接最高优先级（但同等重要性时才会比较权重）。
不能乱用

```css
/* 权重计算：0,1,0,0 */
#app { color: red; }

/* 权重计算：0,0,1,0 */
.container { color: green; }

/* 权重计算：0,0,0,1 */
div { color: blue; }

/* 权重计算：1,0,0,0 */
<div style="color: pink;">行内样式</div>

```

比较规则：

先比较 a（行内）

再比较 b（ID）

再比较 c（类）

最后比较 d（标签）

权重相同 → 后出现的规则 覆盖

底层原理：显示你懂浏览器怎么做

- 浏览器在构建 CSSOM（CSS 对象模型） 时，会为每条规则记录权重值。
- 在渲染计算阶段（Cascade 阶段），浏览器会先比 !important → 再比权重值 → 再按源码顺序。
- 关键：继承样式的权重是 0,0,0,0（除非显式定义在父元素上）。

```css
/* 权重：0,0,2,0 */
.container .title { color: red; }
/* 权重：0,1,0,0 */
#app { color: blue; }
因为 ID 选择器权重大于任意多个类选择器。
先比较ID

```
- 实战
```html
/* UI 组件默认：0,0,1,0 */
.btn { background: gray; }

/* 覆盖：增加父级类提高权重 */
.custom .btn { background: red; } /* 0,0,2,0 */

/* 或直接用行内样式（最高优先级） */
<button style="background: red;"></button>
在字节 ToB 系统里，常用父级类作用域提升权重，避免用 !important。
```
- module.css
hash 
```css
/* 0,0,1,1 */
.btn[data-v-hash] { background: red; }
```

- 踩坑经验 & 优化建议
    - 少用 !important
        除非临时抢救样式或用户样式覆盖，否则会破坏可维护性，后续只能用更多 !important 对抗。
    - 样式冲突排查技巧
    用浏览器 DevTools 查看实际生效规则（Computed 面板）。

    检查是否有继承、默认样式、优先级更高的规则。

    注意动态加载 CSS（后加载文件可能覆盖）。
    - BEM 命名法降低权重冲突
    类名全部平级，不依赖嵌套，权重统一，覆盖时简单直接。


    "CSS 权重是浏览器在 Cascade 阶段用于决定冲突样式优先级的机制，用 a,b,c,d 表示（行内、ID、类/属性/伪类、标签/伪元素），先比 !important，再比权重，再按源码顺序。工程中我经常用增加父类选择器的方式覆盖组件库样式，避免 !important，同时会用 BEM 降低冲突风险。Vue scoped、CSS-in-JS 等方案会改变权重计算，所以覆盖策略要结合编译结果来定。"