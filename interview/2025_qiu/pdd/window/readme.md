- 你有一个长度为 k 的窗口，从数组左到右滑，每次想知道窗口里的最大值。直觉先想的解法往往是“每次窗口内扫描一次”——简单但慢。
  每次窗口滑动时遍历窗口内 k 个元素找最大值。
  时间复杂度：对每个窗口做 k 次比较，总共有约 n 个窗口，O(n·k)。
  缺点：k 较大或 n 很长时性能惨不忍睹。

- 用堆（优于朴素，但仍非最优）
  维护一个大顶堆（priority queue）。每次插入新元素并把过期元素从堆中懒删除/延迟删除：
  时间复杂度：每次插入/删除是 O(log n)，总体 O(n log n)。
  比朴素好，但比单调队列常数和复杂度都逊色。

- 最佳 —— 单调双端队列（推荐）
  核心想法很直白：队列里只保存有可能成为未来窗口最大值的元素下标，并且保持队列里对应的值从头到尾是单调递减。
  新元素来的时候，把比它小的都从队尾弹掉（因为它们不可能再成为更大的元素的最大值）。
  每次窗口左边移出时，如果队头下标已过期就把它弹出。
  队头始终是当前窗口的最大值下标，取值 O(1)。
  关键性质：每个元素最多进队一次、出队一次 → 总操作 O(n)。 

  这车（队列）只拉“有潜力当老大”的人。新人上车，发现后面有比自己弱的，全踹下去。车往前开，坐太久（过期）的人自动下车。车头永远是当前最强的。每个乘客最多上车下车一次，效率贼高，一路稳出最大值。 

## 双端队列

- 双端队列是一种允许从头部和尾部高效地进行插入和删除操作的队列。
- 单调双端队列（monotonic deque）每个元素进队出队最多一次，时间复杂度 O(n)，空间复杂度 O(k)。

- 存下标是为了判断队头元素是否已滑出窗口，从而及时将其移除。