<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ­å·ä¸¤æ—¥æµªæ¼«æ¸¸ - 9.1 Trip</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script type="text/javascript">
        window._AMapSecurityConfig = {
            securityJsCode: 'ee357f74abe3e26c997b9bed0984dcca', // æç¤ºï¼šå¦‚æœæ˜¯Webç«¯å¼€å‘ï¼Œè¯·æ›¿æ¢ä¸ºæ‚¨çš„å®‰å…¨å¯†é’¥
        }
    </script>
    <script src="https://webapi.amap.com/loader.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #f0f9ff;
        }

        .card-shadow {
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card-shadow:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .timeline-line {
            position: absolute;
            left: 20px;
            top: 20px;
            bottom: 0;
            width: 2px;
            background-color: #e5e7eb;
            z-index: 0;
        }

        .love-icon {
            animation: beat 1.5s infinite;
        }

        @keyframes beat {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        /* éšè—é«˜å¾·åœ°å›¾logo */
        .amap-logo, .amap-copyright {
            display: none !important;
        }
    </style>
</head>
<body class="text-gray-700">

    <!-- å¯¼èˆªæ  -->
    <nav class="bg-white/80 backdrop-blur-md fixed w-full z-50 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <div class="flex items-center">
                    <i class="fas fa-paper-plane text-teal-500 text-xl mr-2"></i>
                    <span class="font-bold text-xl tracking-wider text-teal-800">Hangzhou Trip <i class="fas fa-heart text-pink-500 love-icon mx-1"></i> 9.1</span>
                </div>
                <div class="hidden md:flex space-x-8">
                    <a href="#map-section" class="text-gray-600 hover:text-teal-500 transition">åœ°å›¾æ¦‚è§ˆ</a>
                    <a href="#itinerary" class="text-gray-600 hover:text-teal-500 transition">è¡Œç¨‹è¯¦æƒ…</a>
                    <a href="#essentials" class="text-gray-600 hover:text-teal-500 transition">å‡ºè¡Œé”¦å›Š</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- é¡¶éƒ¨HeroåŒºåŸŸ + åœ°å›¾ -->
    <div id="map-section" class="pt-16 h-[60vh] relative w-full bg-gray-200">
        <div id="container" class="w-full h-full"></div>
        
        <!-- æµ®åŠ¨å¤©æ°”å¡ç‰‡ -->
        <div class="absolute top-20 right-4 bg-white/90 backdrop-blur rounded-xl p-4 shadow-lg z-10 w-48 card-shadow">
            <div class="flex items-center justify-between mb-2">
                <span class="text-xs text-gray-500">2026-09-01</span>
                <span class="text-xs bg-teal-100 text-teal-600 px-2 py-0.5 rounded-full">é¢„è®¡</span>
            </div>
            <div class="flex items-center">
                <i class="fas fa-sun text-yellow-400 text-3xl mr-3"></i>
                <div>
                    <div class="text-2xl font-bold text-gray-800">26Â°C</div>
                    <div class="text-sm text-gray-600">æ™´è½¬å¤šäº‘</div>
                </div>
            </div>
            <div class="mt-2 text-xs text-gray-500 border-t pt-2">
                <i class="fas fa-wind mr-1"></i> ä¸œé£ 2çº§
            </div>
        </div>

        <!-- å¿«é€Ÿè¡Œç¨‹æ¦‚è§ˆå¡ç‰‡ -->
        <div class="absolute bottom-4 left-4 right-4 md:left-8 md:w-96 bg-white/95 backdrop-blur rounded-xl p-4 shadow-lg z-10 card-shadow">
            <h3 class="font-bold text-lg mb-3 text-teal-800 border-b pb-2">å½“å‰è¡Œç¨‹: Day 1 è¥¿æ¹–æ¼«æ­¥</h3>
            <div class="space-y-3" id="mini-itinerary">
                <!-- åŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
    </div>

    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <div class="max-w-5xl mx-auto px-4 py-8 space-y-12">
        
        <!-- è¡Œç¨‹è¯¦æƒ… -->
        <div id="itinerary">
            <h2 class="text-3xl font-bold text-center mb-10 text-teal-800">
                <span class="border-b-4 border-pink-200">æµªæ¼«è¡Œç¨‹è§„åˆ’</span>
            </h2>

            <!-- Day 1 -->
            <div class="mb-12">
                <div class="flex items-center mb-6">
                    <div class="bg-teal-500 text-white font-bold rounded-lg px-4 py-2 text-xl shadow-md mr-4">D1</div>
                    <h3 class="text-2xl font-bold text-gray-800">9æœˆ1æ—¥ Â· åˆè§è¥¿æ¹–ä¸æ—¥è½</h3>
                </div>
                
                <div class="grid md:grid-cols-2 gap-8">
                    <!-- å·¦ä¾§è·¯çº¿è½´ -->
                    <div class="relative pl-8 space-y-8" id="day1-timeline">
                        <div class="timeline-line"></div>
                        <!-- åŠ¨æ€ç”Ÿæˆ D1 èŠ‚ç‚¹ -->
                    </div>
                    <!-- å³ä¾§è¯¦æƒ…å±•ç¤º (ç€‘å¸ƒæµå¡ç‰‡) -->
                    <div class="space-y-6" id="day1-cards">
                        <!-- åŠ¨æ€ç”Ÿæˆ D1 å¡ç‰‡ -->
                    </div>
                </div>
            </div>

            <!-- Day 2 -->
            <div>
                <div class="flex items-center mb-6">
                    <div class="bg-teal-500 text-white font-bold rounded-lg px-4 py-2 text-xl shadow-md mr-4">D2</div>
                    <h3 class="text-2xl font-bold text-gray-800">9æœˆ2æ—¥ Â· çµéšç¥ˆç¦ä¸å…‰å½±</h3>
                </div>
                
                <div class="grid md:grid-cols-2 gap-8">
                    <!-- å·¦ä¾§è·¯çº¿è½´ -->
                    <div class="relative pl-8 space-y-8" id="day2-timeline">
                        <div class="timeline-line"></div>
                         <!-- åŠ¨æ€ç”Ÿæˆ D2 èŠ‚ç‚¹ -->
                    </div>
                    <!-- å³ä¾§è¯¦æƒ…å±•ç¤º -->
                    <div class="space-y-6" id="day2-cards">
                        <!-- åŠ¨æ€ç”Ÿæˆ D2 å¡ç‰‡ -->
                    </div>
                </div>
            </div>
        </div>

        <!-- é™„åŠ åŠŸèƒ½åŒº -->
        <div id="essentials" class="grid md:grid-cols-3 gap-6">
            <!-- ç¾é£Ÿ -->
            <div class="bg-white rounded-2xl p-6 card-shadow border-t-4 border-orange-400">
                <h4 class="font-bold text-lg mb-4 flex items-center"><i class="fas fa-utensils text-orange-400 mr-2"></i> å¿…åƒç¾é£Ÿ</h4>
                <ul class="space-y-2 text-sm text-gray-600">
                    <li class="flex justify-between"><span>A.MONO æ³•å¼ç”œå“</span> <span class="text-pink-500">â˜…â˜…â˜…â˜…â˜†</span></li>
                    <li class="flex justify-between"><span>è¥¿æ¹–é†‹é±¼ (æ…ç‚¹)</span> <span class="text-gray-400">é¿é›·</span></li>
                    <li class="flex justify-between"><span>ç‰‡å„¿å·é¢</span> <span class="text-orange-500">æ¨è</span></li>
                    <li class="flex justify-between"><span>è‘±åŒ…æ¡§</span> <span class="text-orange-500">è¡—å¤´å°åƒ</span></li>
                </ul>
            </div>

            <!-- ç‰©å“æ¸…å• -->
            <div class="bg-white rounded-2xl p-6 card-shadow border-t-4 border-blue-400">
                <h4 class="font-bold text-lg mb-4 flex items-center"><i class="fas fa-suitcase text-blue-400 mr-2"></i> å¿…å¤‡æ¸…å•</h4>
                <ul class="space-y-2 text-sm text-gray-600">
                    <li><input type="checkbox" class="mr-2" checked> èº«ä»½è¯/å­¦ç”Ÿè¯</li>
                    <li><input type="checkbox" class="mr-2" checked> å……ç”µå® (æ‹ç…§è€—ç”µ)</li>
                    <li><input type="checkbox" class="mr-2" checked> é˜²æ™’éœœ/é®é˜³ä¼</li>
                    <li><input type="checkbox" class="mr-2"> èˆ’é€‚çš„å¹³åº•é‹</li>
                    <li><input type="checkbox" class="mr-2"> é©±èšŠæ°´ (å±±é‡ŒèšŠè™«å¤š)</li>
                </ul>
            </div>

            <!-- ç´§æ€¥è”ç³» -->
            <div class="bg-white rounded-2xl p-6 card-shadow border-t-4 border-red-400">
                <h4 class="font-bold text-lg mb-4 flex items-center"><i class="fas fa-heartbeat text-red-400 mr-2"></i> ç´§æ€¥åŠ©æ‰‹</h4>
                <div class="text-sm text-gray-600 space-y-2">
                    <p>æœ€è¿‘åŒ»é™¢: æ­å·å¸‚ç¬¬ä¸€äººæ°‘åŒ»é™¢</p>
                    <p>æŠ¥è­¦: 110 | æ€¥æ•‘: 120</p>
                    <div class="mt-4 p-3 bg-red-50 rounded text-red-600 text-xs">
                        <i class="fas fa-exclamation-circle"></i> çµéšå¯ºè¯·é¦™æ³¨æ„é˜²éª—ï¼Œå»ºè®®åªåœ¨å¯ºå†…è¯·é¦™ã€‚
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="bg-gray-800 text-white py-8 text-center mt-12">
        <p class="text-gray-400 text-sm">Made with â¤ï¸ for your Trip</p>
        <p class="text-gray-500 text-xs mt-2">æ•°æ®æ¥æºï¼šé«˜å¾·å¼€æ”¾å¹³å°</p>
    </footer>

    <!-- æ•°æ®ä¸é€»è¾‘ -->
    <script>
        // æ¨¡æ‹Ÿæ•°æ® (åŸºäºMCPæŸ¥è¯¢ç»“æœ)
        const tripData = {
            day1: [
                {
                    id: 'd1-1',
                    time: '14:00',
                    name: 'æ¹–æ»¨å…¬å›­ (å‡ºå‘)',
                    desc: 'è¥¿æ¹–çš„ç»ä½³èµ·ç‚¹ï¼Œçœ‹æ¾é¼ ï¼Œæ‹æ¹–æ™¯ã€‚',
                    type: 'start',
                    lat: 30.256583,
                    lng: 120.158818,
                    photo: 'https://store.is.autonavi.com/showpic/04A76AB46308410FBDAF3C8577E67275',
                    rating: '4.7',
                    duration: '0.5h'
                },
                {
                    id: 'd1-2',
                    time: '15:00',
                    name: 'æ–­æ¡¥æ®‹é›ª',
                    desc: 'è®¸ä»™ç™½å¨˜å­ç›¸ä¼šå¤„ï¼Œè™½ç„¶æ²¡é›ªï¼Œä½†æ¡¥ä¸Šè§†é‡å¼€é˜”ï¼Œé€‚åˆäººåƒæ‘„å½±ã€‚',
                    type: 'scenic',
                    lat: 30.2588, // è¿‘ä¼¼
                    lng: 120.1519,
                    photo: 'http://store.is.autonavi.com/showpic/7c59b9c01d797d7372df644ac99c3492',
                    rating: '4.8',
                    duration: '1h'
                },
                {
                    id: 'd1-3',
                    time: '16:30',
                    name: 'A.MONO æ³•å¼ç”œå“',
                    desc: 'ä½äºæ»¡è§‰é™‡çš„ç²¾è‡´ç”œå“åº—ï¼Œç¯å¢ƒä¼˜é›…ï¼Œé€‚åˆä¼‘æ¯æ‹ç…§ã€‚',
                    type: 'food',
                    lat: 30.217525,
                    lng: 120.123375,
                    photo: 'https://aos-comment.amap.com/B0FFJN4BD2/comment/content_media_external_file_100002339_1767019834225_38740273.jpg',
                    rating: '4.4',
                    duration: '1.5h'
                },
                {
                    id: 'd1-4',
                    time: '19:00',
                    name: 'é›·å³°å¡” (æ—¥è½/å¤œæ™¯)',
                    desc: 'å¤•é˜³è¥¿ä¸‹ï¼Œé›·å³°å¤•ç…§ã€‚æ™šä¸Šäº®ç¯åæ›´ç¾ã€‚',
                    type: 'scenic',
                    lat: 30.2319,
                    lng: 120.1420,
                    photo: 'http://store.is.autonavi.com/showpic/00ed729f44f8613ee1ecdb93d10370f4',
                    rating: '4.7',
                    duration: '1.5h'
                }
            ],
            day2: [
                {
                    id: 'd2-1',
                    time: '08:30',
                    name: 'çµéšå¯º',
                    desc: 'åƒå¹´å¤åˆ¹ï¼Œç¥ˆç¦æ±‚ç­¾ã€‚å»ºè®®æ—©å»é¿å¼€äººæµã€‚',
                    type: 'scenic',
                    lat: 30.240826,
                    lng: 120.101406,
                    photo: 'http://store.is.autonavi.com/showpic/4aa0a6a1b6ee72c9833441f363cbb43a',
                    rating: '4.9',
                    duration: '2.5h'
                },
                {
                    id: 'd2-2',
                    time: '11:30',
                    name: 'ç´ é¢/é™„è¿‘é¤é¥®',
                    desc: 'çµéšå¯ºå†…çš„ç´ é¢éå¸¸æœ‰åï¼Œå€¼å¾—ä¸€è¯•ã€‚',
                    type: 'food',
                    lat: 30.240826,
                    lng: 120.101406,
                    photo: 'https://store.is.autonavi.com/showpic/89f14a50e5de4e4ffaf01a11ebdf5ed0',
                    rating: '4.5',
                    duration: '1h'
                },
                {
                    id: 'd2-3',
                    time: '13:30',
                    name: 'æ³•å–œå¯º (ä¸Šå¤©ç«º)',
                    desc: 'ç½‘çº¢æ‰“å¡åœ°ï¼Œæ±‚å§»ç¼˜çµéªŒï¼Œæ‹ç…§éå¸¸å‡ºç‰‡ã€‚',
                    type: 'scenic',
                    lat: 30.227208,
                    lng: 120.095362,
                    photo: 'http://store.is.autonavi.com/showpic/3d2678cd496db03f14090ba6e1330717',
                    rating: '4.8',
                    duration: '2h'
                }
            ]
        };

        // åˆå§‹åŒ–é¡µé¢å†…å®¹
        function initContent() {
            renderDay('day1', tripData.day1);
            renderDay('day2', tripData.day2);
            renderMiniItinerary();
        }

        // æ¸²æŸ“æ¯ä¸€å¤©çš„è¡Œç¨‹
        function renderDay(dayId, nodes) {
            const timelineEl = document.getElementById(`${dayId}-timeline`);
            const cardsEl = document.getElementById(`${dayId}-cards`);

            nodes.forEach((node, index) => {
                // 1. æ¸²æŸ“æ—¶é—´è½´èŠ‚ç‚¹
                const isLast = index === nodes.length - 1;
                const nodeHtml = `
                    <div class="relative z-10 flex items-start group cursor-pointer hover:bg-white/50 p-2 rounded-lg transition" onclick="focusOnMap('${node.id}')">
                        <div class="bg-white border-4 ${node.type === 'food' ? 'border-pink-400' : 'border-teal-500'} w-4 h-4 rounded-full mt-1.5 -ml-[1.65rem] shrink-0"></div>
                        <div class="ml-4">
                            <div class="font-bold text-gray-800">${node.time}</div>
                            <div class="text-sm font-medium text-gray-600">${node.name}</div>
                            ${!isLast ? `<div class="text-xs text-gray-400 mt-2 pl-2 border-l-2 border-dotted border-gray-300 h-8"> ğŸš— çº¦15åˆ†é’Ÿ</div>` : ''}
                        </div>
                    </div>
                `;
                timelineEl.insertAdjacentHTML('beforeend', nodeHtml);

                // 2. æ¸²æŸ“å¡ç‰‡
                const cardHtml = `
                    <div class="bg-white rounded-xl overflow-hidden card-shadow flex flex-col md:flex-row h-full md:h-48" id="card-${node.id}">
                        <div class="md:w-1/3 h-48 md:h-full relative overflow-hidden">
                            <img src="${node.photo || 'https://via.placeholder.com/300'}" class="w-full h-full object-cover transform hover:scale-110 transition duration-700" alt="${node.name}">
                            <div class="absolute top-2 left-2 bg-black/50 text-white text-xs px-2 py-1 rounded backdrop-blur">
                                â­ ${node.rating}
                            </div>
                        </div>
                        <div class="p-4 md:w-2/3 flex flex-col justify-between">
                            <div>
                                <div class="flex justify-between items-start">
                                    <h4 class="font-bold text-lg text-gray-800">${node.name}</h4>
                                    <span class="text-xs bg-gray-100 text-gray-500 px-2 py-1 rounded">æ¸¸ç© ${node.duration}</span>
                                </div>
                                <p class="text-sm text-gray-600 mt-2 line-clamp-2">${node.desc}</p>
                                <div class="mt-2 text-xs text-gray-500">
                                    <i class="far fa-clock"></i> å¼€æ”¾æ—¶é—´: 07:00-18:00 (å‚è€ƒ)
                                </div>
                            </div>
                            <div class="mt-4 flex justify-end">
                                <a href="https://uri.amap.com/marker?position=${node.lng},${node.lat}&name=${node.name}" target="_blank" 
                                   class="bg-teal-500 hover:bg-teal-600 text-white text-sm px-4 py-2 rounded-full shadow-md transition flex items-center">
                                    <i class="fas fa-location-arrow mr-2"></i> å¯¼èˆªå‰å¾€
                                </a>
                            </div>
                        </div>
                    </div>
                `;
                cardsEl.insertAdjacentHTML('beforeend', cardHtml);
            });
        }

        // æ¸²æŸ“å·¦ä¸‹è§’å°æµ®çª—
        function renderMiniItinerary() {
            const container = document.getElementById('mini-itinerary');
            tripData.day1.forEach(node => {
                container.insertAdjacentHTML('beforeend', `
                    <div class="flex items-center text-sm cursor-pointer hover:text-teal-600" onclick="focusOnMap('${node.id}')">
                        <div class="w-2 h-2 rounded-full bg-teal-400 mr-3"></div>
                        <span class="w-12 text-gray-400 text-xs">${node.time}</span>
                        <span class="truncate font-medium">${node.name}</span>
                    </div>
                `);
            });
        }

        // åœ°å›¾ç›¸å…³é€»è¾‘
        let map;
        let markers = {};

        function initMap() {
            AMapLoader.load({
                key: "YOUR_KEY_HERE", // å¿…é¡»: è¯·ä½¿ç”¨æ‚¨çš„Key
                version: "2.0",
                plugins: ['AMap.Driving', 'AMap.ToolBar', 'AMap.Scale']
            }).then((AMap) => {
                map = new AMap.Map("container", {
                    viewMode: "3D",
                    zoom: 13,
                    center: [120.158818, 30.256583], // é»˜è®¤æ­å·è¥¿æ¹–
                    pitch: 45,
                });
                
                map.addControl(new AMap.ToolBar());
                map.addControl(new AMap.Scale());

                // ç»˜åˆ¶ Day 1 è·¯çº¿å’Œæ ‡è®°
                drawRoute(tripData.day1, 'teal', AMap);
                drawRoute(tripData.day2, 'pink', AMap);

            }).catch(e => {
                console.warn("åœ°å›¾åŠ è½½å¤±è´¥ï¼Œå¯èƒ½æ˜¯Keyæœªé…ç½®ã€‚é¡µé¢å°†ä»¥é™çº§æ¨¡å¼è¿è¡Œã€‚", e);
                document.getElementById('container').innerHTML = `
                    <div class="flex flex-col items-center justify-center h-full bg-gray-100 text-gray-500">
                        <i class="fas fa-map-marked-alt text-6xl mb-4 text-gray-300"></i>
                        <p>åœ°å›¾åŠ è½½éœ€é…ç½®API Key</p>
                        <p class="text-xs mt-2">ä½†æ‚¨çš„è¡Œç¨‹å¡ç‰‡å·²å‡†å¤‡å°±ç»ª ğŸ‘‡</p>
                    </div>
                `;
            });
        }

        function drawRoute(nodes, color, AMap) {
            const path = [];
            
            nodes.forEach((node, i) => {
                const position = new AMap.LngLat(node.lng, node.lat);
                path.push(position);

                // åˆ›å»ºæ ‡è®°
                const markerContent = `
                    <div class="flex flex-col items-center">
                        <div class="bg-white text-xs font-bold px-2 py-1 rounded shadow-md mb-1 whitespace-nowrap text-${color}-600 border border-${color}-100">
                            ${node.name}
                        </div>
                        <div class="w-8 h-8 bg-${color}-500 rounded-full border-4 border-white shadow-lg flex items-center justify-center text-white font-bold text-xs">
                            ${i + 1}
                        </div>
                    </div>
                `;

                const marker = new AMap.Marker({
                    position: position,
                    content: markerContent,
                    offset: new AMap.Pixel(-16, -40),
                    map: map
                });

                markers[node.id] = { marker, position };

                marker.on('click', () => {
                    document.getElementById(`card-${node.id}`).scrollIntoView({ behavior: 'smooth', block: 'center' });
                    highlightCard(node.id);
                });
            });

            // ç®€å•è¿çº¿
            /* æ³¨æ„ï¼šå®é™…é©¾è½¦è·¯çº¿éœ€è¦è°ƒç”¨ Driving APIï¼Œè¿™é‡Œä»…ç”¨ç›´çº¿è¿æ¥æ¼”ç¤º */
            const polyline = new AMap.Polyline({
                path: path,
                isOutline: true,
                outlineColor: '#ffeeff',
                borderWeight: 2,
                strokeColor: color === 'teal' ? "#14b8a6" : "#ec4899", 
                strokeOpacity: 0.8,
                strokeWeight: 5,
                strokeStyle: "dashed",
                lineJoin: 'round',
                lineCap: 'round',
                zIndex: 50,
            });
            map.add(polyline);
        }

        function focusOnMap(id) {
            if (!map || !markers[id]) return;
            map.setZoomAndCenter(16, markers[id].position);
            highlightCard(id);
        }

        function highlightCard(id) {
            // ç§»é™¤å…¶ä»–é«˜äº®
            document.querySelectorAll('[id^="card-"]').forEach(el => el.classList.remove('ring-4', 'ring-teal-200'));
            const card = document.getElementById(`card-${id}`);
            if (card) {
                card.classList.add('ring-4', 'ring-teal-200');
            }
        }

        // å¯åŠ¨
        initContent();
        initMap();

    </script>
</body>
</html>